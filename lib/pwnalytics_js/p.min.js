var Pwnalytics=Pwnalytics||{};Pwnalytics.api=function(a){switch(typeof a){case"string":Pwnalytics.post(a,{});break;case"object":if(typeof a.length==="number"&&typeof a[0]==="string"){Pwnalytics.post(a[0],a[1])}else{Pwnalytics.ammendSession(a)}break;case"function":a.call();break}};Pwnalytics.onLoad=function(){Pwnalytics.initSession();var b=window._paq;window._paq={push:Pwnalytics.api};for(var a=0;a<b.length;a+=1){Pwnalytics.api(b[a])}};Pwnalytics.readHistory=function(){this.session.url=""+document.location;this.session.ref=""+document.referrer};Pwnalytics.postUrl="bin/p.gif";Pwnalytics.post=function(a,b){this.session.time=(new Date()).getTime();this.image(this.eventUrl(this.session,a,b))};Pwnalytics.eventUrl=function(f,c,d){var a=[this.postUrl+"?__="+c];for(var e in f){if(typeof e==="string"&&e.substring(0,2)!=="__"){a.push("__"+e+"="+escape(f[e]))}}for(var b in d){if(typeof b==="string"&&b.substring(0,2)!=="__"){a.push(b+"="+escape(d[b]))}}return a.join("&")};Pwnalytics.image=function(c){var b=new Image();b.src=c;var a=function(){setTimeout(function(){Pwnalytics.image(c)},60000)};b.onerror=a;b.onabort=a};Pwnalytics.session={};Pwnalytics.dropSession=function(){this.dropUid();this.session={pid:Pwnalytics.session.pid}};Pwnalytics.initSession=function(){this.session.uid=Pwnalytics.uid();this.readHistory()};Pwnalytics.ammendSession=function(b){for(var a in b){if(typeof a!=="string"||a.substring(0,2)!=="__"){this.session[a]=b[a]}}};Pwnalytics.onUnload=function(){Pwnalytics.post("unload",{})};if(window.addEventListener){window.addEventListener("unload",Pwnalytics.onUnload,false)}else{if(window.attachEvent){window.attachEvent("unload",Pwnalytics.onUnload)}}Pwnalytics.useLocalStorage=!!window.localStorage;Pwnalytics.dropUid=function(){if(this.useLocalStorage){window.localStorage.removeItem("__pwnu")}else{document.cookie="__pwnu=;expires=Thu, 01-Jan-1970 00:00:01 GMT"}this.cachedUid=null};Pwnalytics.randomUid=function(){var c=(new Date()).getTime().toString(16);var b=Math.floor(Math.random()*2147483647).toString(16);var a=Math.floor(Math.random()*2147483647).toString(16);return c+"."+b+a};Pwnalytics.uid=function(){if(this.cachedUid){return this.cachedUid}if(!(this.cachedUid=this.readUid())){this.cachedUid=this.randomUid();this.stashUid(this.cachedUid)}return this.cachedUid};Pwnalytics.readUid=function(){if(this.useLocalStorage){return window.localStorage.getItem("__pwnu")}else{var a=/(^|\W)__pwnu=([^;]*)(;|$)/.exec(document.cookie);return a&&a[2]}};Pwnalytics.stashUid=function(a){if(this.useLocalStorage){window.localStorage.setItem("__pwnu",a)}else{document.cookie="__pwnu="+a+"; expires=Tue, 19-Jan-2038 03:14:07 GMT"}};Pwnalytics.onLoad();